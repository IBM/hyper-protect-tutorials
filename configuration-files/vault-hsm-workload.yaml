type: workload
play:
  templates:
    - apiVersion: v1
      kind: Pod
      metadata:
        name: zcatvault
      spec:
        securityContext:
          privileged: false
        containers:
        - name: zcatvault
          image: us.icr.io/zcat-hashicorp/vault-ent-hsm@sha256:0045391c225cfa36200c135db0bdc51f085b5806aa80849e225d23beea26b156
          securityContext:
            privileged: false
          volumeMounts:
          - name: vault-data
            mountPath: /vault/data
          env:
          - name: grep11
            value: aWFtY3JlZGVudGlhbHRlbXBsYXRlOiAmZGVmYXVsdGlhbWNyZWRlbnRpYWwKICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlCiAgICAgICAgICBlbmRwb2ludDogImh0dHBzOi8vaWFtLmNsb3VkLmlibS5jb20iCgpzZXNzaW9uYXV0aHRlbXBsYXRlOiAmZGVmYXVsdHNlc3Npb25hdXRoCiAgZW5hYmxlZDogZmFsc2UKICB0b2tlbnNwYWNlSURQYXNzd29yZDogIjEyMzQ1Njc4IgoKdG9rZW5zOgogIDA6CiAgICBncmVwMTFjb25uZWN0aW9uOgogICAgICBhZGRyZXNzOiAiMTkyLjE2OC4xMjIuMTQiCiAgICAgIHBvcnQ6ICI5ODc2IgogICAgICB0bHM6CiAgICAgICAgZW5hYmxlZDogdHJ1ZQogICAgICAgIG11dHVhbDogdHJ1ZQogICAgICAgIGNhY2VydDogIi9ldGMvZXAxMWNsaWVudC9jZXJ0cy9ncmVwMTEtY2EucGVtIgogICAgICAgIGNlcnRmaWxlOiAiL2V0Yy9lcDExY2xpZW50L2NlcnRzL2dyZXAxMS1jbGllbnQucGVtIgogICAgICAgIGtleWZpbGU6ICIvZXRjL2VwMTFjbGllbnQvY2VydHMvZ3JlcDExLWNsaWVudC5rZXkiCiAgICBzdG9yYWdlOgojICAgICAgZmlsZXN0b3JlOgojICAgICAgICBlbmFibGVkOiB0cnVlCiMgICAgICAgIHN0b3JhZ2VwYXRoOiA8R1JFUDExLUtleVN0b3JlPgogICAgICByZW1vdGVzdG9yZToKICAgICAgICBlbmFibGVkOiB0cnVlCiAgICAgICMgbG9jYWxwb3N0Z3JlczoKICAgICAgIyAgIGVuYWJsZWQ6IGZhbHNlCiAgICAgICMgICBjb25uZWN0aW9uc3RyaW5nOgogICAgdXNlcnM6CiAgICAgIDA6ICMgU08gVXNlcgogICAgICAgIG5hbWU6ICJTTyB1c2VyIgogICAgICAxOiAjIFVzZXIKICAgICAgICBuYW1lOiAiTm9ybWFsIHVzZXIiCiAgICAgICAgdG9rZW5zcGFjZUlEOiAiMjFEQ0FCQUEtQkVDNy00NDJBLTgwODktNUJEOTU4MkNCN0VCIgogICAgICAyOiAjIEFub255bW91cyB1c2VyCiAgICAgICAgbmFtZTogIkFub255bW91cyIKICAgICAgICB0b2tlbnNwYWNlSUQ6ICJCNzdDQjk2RS0xRDQwLTQ1MzAtOEFBNC1GOTZEREJFRUNEMDQiCmxvZ2dpbmc6CiAgbG9nbGV2ZWw6ICJ0cmFjZSIKICBsb2dwYXRoOiAiL2V0Yy9lcDExY2xpZW50L3BrY3MxMS5sb2ciCg==
          - name: ca
            value: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURrVENDQW5tZ0F3SUJBZ0lVVDE4VU9hWjFpQU8rUVRDL0s0clBIVXVGSm9Zd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1dERUxNQWtHQTFVRUJoTUNWVk14RXpBUkJnTlZCQWdNQ2tOaGJHbG1iM0p1YVdFeEZEQVNCZ05WQkFjTQpDMHh2Y3lCQmJtZGxiR1Z6TVF3d0NnWURWUVFLREFOSlFrMHhFREFPQmdOVkJBTU1CM0p6ZVhOc2IyY3dIaGNOCk1qTXhNREU0TVRrMU1ESTJXaGNOTWpVeE1ERTNNVGsxTURJMldqQllNUXN3Q1FZRFZRUUdFd0pWVXpFVE1CRUcKQTFVRUNBd0tRMkZzYVdadmNtNXBZVEVVTUJJR0ExVUVCd3dMVEc5eklFRnVaMlZzWlhNeEREQUtCZ05WQkFvTQpBMGxDVFRFUU1BNEdBMVVFQXd3SGNuTjVjMnh2WnpDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDCkFRb0NnZ0VCQU10LzdUTVkyblpTMnpYTXdiQ0ZCTjBKMEgxZDRoamRFc0pqNzNCdzVXVlhKMEc4RVdab3M5Tk8KQm1NcHc5THEyWU1OUVIwNnAwRVVNbWxHUmZkWVhDUEwwc25YU0RIRUJ3YnZyL1BHVFZ1MXVyelRaNDkzdG5tegpkSEsrNEVubUpnUzhnR1NXQTFDeng5YUJwQS9mM0FCT0RvcGVONjZkUkFQSWJTWGZCYU5ZVjREZ3ZYMVZWUUxRCitGZzlFWEQxckxaV0taWEhVeFk3MkFHTWJjOTkxcmFJTzBwVUFtVHo3Z3duUjJDVlNFUnZFOUhTU1Z0NFNxSjMKK1FUTkIzSUkvVjdwWUFDbmpYY0MxaGZpVmxiYjNjR2Q5WG8zYUVNSm5pcnRYVExaSWlVanJCM2ZrWExIUWlCZgpSdlF0Nk4xdWJCL3B3dFRRdkZuaFhqWXk0bUxvVUVFQ0F3RUFBYU5UTUZFd0hRWURWUjBPQkJZRUZHYTF0bVdRCmtVaFVFdlhlUnFLcDg1c2tyaTFOTUI4R0ExVWRJd1FZTUJhQUZHYTF0bVdRa1VoVUV2WGVScUtwODVza3JpMU4KTUE4R0ExVWRFd0VCL3dRRk1BTUJBZjh3RFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUxLd1d1aGtmYllZam1QVQpUd2hlTmJYMThrWlRoczVBUGYxTWM4MVdSZFliRzh5Q3JYT2J6MDJSQWZ3MGFGK2gyVlluRStNT1Ntdy9DMEMxCjdKWWh6UGJvVHZrdXVWNXBROER1Y3grcStVZUUwdzJDWHFqZnRzRlJIQ2RpSVJHQ1NrVjBvUFhZM3MwOFNsY3AKUkswSWdHdkxsTzNzejd3U2xkRlgwTDl1ZHNET08vKzZCK3NMMlpzV1hXWktGRUpFZ092SFJYcUQzRjRSN3dsbwpvY0ZyNS9INWREclRUVS95SUozVDFjcEU4SFhMTEZFWXVCeUdJMWVSclRBVllPVGwzUUNDZUlrbmNkMXhnUHNBCnZ1Z3RhT2NCM2Z6ZUpwT1V3dCtXa2RiemRRTEd0Zm9Ka0F1Rm9ybXV6c045d0x1ZGw3MVZDUllOc3k5VFZvbW4KV3BMRnlDRT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
          - name: client
            value: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURRakNDQWlvQ0ZHNldmSkozVk50c3VyaEpVSThCVUQzZkdybVFNQTBHQ1NxR1NJYjNEUUVCQ3dVQU1GZ3gKQ3pBSkJnTlZCQVlUQWxWVE1STXdFUVlEVlFRSURBcERZV3hwWm05eWJtbGhNUlF3RWdZRFZRUUhEQXRNYjNNZwpRVzVuWld4bGN6RU1NQW9HQTFVRUNnd0RTVUpOTVJBd0RnWURWUVFEREFkeWMzbHpiRzluTUI0WERUSTBNREl3Ck1qRTFNelV3TlZvWERUSTJNREl3TVRFMU16VXdOVm93WXpFTE1Ba0dBMVVFQmhNQ1ZWTXhFekFSQmdOVkJBZ00KQ2tOaGJHbG1iM0p1YVdFeEZEQVNCZ05WQkFjTUMweHZjeUJCYm1kbGJHVnpNUXd3Q2dZRFZRUUtEQU5KUWsweApHekFaQmdOVkJBTU1FbU5zYVdWdWRDNWxlR0Z0Y0d4bExtTnZiVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFECmdnRVBBRENDQVFvQ2dnRUJBTG42K1RCV3BVbCtZQWFzUHRXK0tzdUJFejZEMlY0N0gxc0lzbEtHamFvVXFLblkKVDdrM2tkUnA1cDljdWlMdStwTWloQ0pPeWtGc1QrbnBTN3UwMDE1T0xPTDhqOCs3dmFOR29LVFpmdFZRSmsybwpidHMrVFU4T1VsUVRiQXV0K25hWmh0OStOVW5adkNJMWpldDl1WjZUcEdON25mc1FtZXo0SENMRy9GWmZwN2NGClBhN2FOYnVmMU9MMXRKN3JQdGZ0RnowemgyRFJyL2VpS2RnemNnR2NvWkZiaHZkWFFmb2JVZ0JHUUtEb2VmL2MKdk5RVG4xT0owb1JXS2xua0Ewb3dQLzdyaWd3b1d4am9ZbTZ5MHhGVXYyRWttTDlEOERYempjOEo3RGtsckR0NAoveG9lR2sxYzZmNDY2eVBQam1FSXVHY1R6aWZoVnFKYUhYT2JqMjBDQXdFQUFUQU5CZ2txaGtpRzl3MEJBUXNGCkFBT0NBUUVBTEhZdFp5YzExZ201TUQweFpHU0JOenhKNUU1VmlMQ1laWVA2L0VLajdYWElnV0RrNll3R1dUTk4KN3V5LzJuNGFyeU9Gcy93dERpcTNmaHhXTTQ1L3JoU2JwWDhOL0JVK2VkWVE1cGIxS3cyaVZna2VTeUpOQ25jUQpCWFVacC83czBBMlhQUWVabk1rMFlPN2k3N0N0Rm5hVVZWT3JEeFZNR2drMUJRSVNMMXdTNm8vTXVaUEVyd0JLCkU1QkJNMWdjM0JNcWVDSURlbG8veTVkUER3ZHJ4dlFGVlg5SWp3V2Q0RS9JVmlTNFBObUxOOFBSUnlSLzZqNjEKU0pQdXV6TUUwWWdDNzQyZTFXVitLdFEzYU5yK1ZyVDZsYVZZUEhDU21ycitNUVZ2UXRWbTRCK3pLZFl6Z0N3dgp4OExDV0lVcmk2Q2N0eDNtTnp5MXR1ajEzNkp5RHc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
          - name: key
            value: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcFFJQkFBS0NBUUVBdWZyNU1GYWxTWDVnQnF3KzFiNHF5NEVUUG9QWlhqc2ZXd2l5VW9hTnFoU29xZGhQCnVUZVIxR25tbjF5Nkl1NzZreUtFSWs3S1FXeFA2ZWxMdTdUVFhrNHM0dnlQejd1OW8wYWdwTmwrMVZBbVRhaHUKMno1TlR3NVNWQk5zQzYzNmRwbUczMzQxU2RtOElqV042MzI1bnBPa1kzdWQreENaN1BnY0lzYjhWbCtudHdVOQpydG8xdTUvVTR2VzBudXMrMSswWFBUT0hZTkd2OTZJcDJETnlBWnloa1Z1RzkxZEIraHRTQUVaQW9PaDUvOXk4CjFCT2ZVNG5TaEZZcVdlUURTakEvL3V1S0RDaGJHT2hpYnJMVEVWUy9ZU1NZdjBQd05mT056d25zT1NXc08zai8KR2g0YVRWenAvanJySTgrT1lRaTRaeFBPSitGV29sb2RjNXVQYlFJREFRQUJBb0lCQUVHUHZzNlNqTnYycCtWUwpUU2hPVEluRzY4REsvQktpNXUvUmhnTmZtWXNPazFLa2haNDJmN3NReGhNQnZrQllYSThIeU9yTE9iT01lak5zCllaMC9KcEFGSVArM3B2N0ZJUm53Nk9xVUhZa1hJeG1YT2RVaUJtRExIS3kwMkE3Wit3UmFKTmllaGl5TmpDdkgKRTB1ajI0NlNYNDRPWXVmQnQzRjVHWG9OQ2FGc3BzamUvRWxSZEJFUnlpVHUvNGR0eUpLL3lTWU00Z1VFbFFDVAo5cnovZHc5MW01YWhnY3phQnI1M3RwZGpMeDZGb1JaRC9HMjlOSjVwMWgyM3V6RjdBaUI2TmdpSE5YVmJhUjBTClhZOWZBTThPRDdSbzREbGZwa3VnUTVxT0JmSHVqUHZMYmNzbk0yNk9sMXJqaGEvWWZ1cjRhbmJPZWwxVzdwUnUKMkxMbWx3RUNnWUVBNjVZeWVJS0ZqbkNNL1RmYkpNVWdyaG5vM2ZHbkJCcmIyL3JEL200bFk4d2trZzZTcXVyNgpPOXIzVkxxZ1V4VmtKUHdyN0lvY2ZKc04rWXdPZ2toZzh1VXVCV0NLY2ZmbDVVTC9YRWpSRzhsaitLY1pCeDNECnBueUJTUnJSaE9UQVFGYmY0T2ZNOGczNHVqcUNPOCtQQkNrK2U2QnJ2SEdHSUdmSDNhWnhyc0VDZ1lFQXloaG4KaWhrV0VKYWluK3lESUZ5cHpLWjZGSmpuVjJmTFhiNGVHalRKaFNFRWVlSlByTTZMb21DMk5nbTI2NVpCeTlBZQpxVDVCeTA3dkdySHd5NFpRQk9NbUlBbm5vRmc5NlhWaFJ1M29BZ0ptRjJ4T2puS3A5M0pCekdFaitlVms2YVV3CmE0QTh3eFVlS0NXT0puenpMU0pLSGNJaTNXYmV6dlp4RlRoOU42MENnWUVBckpmTUFBZTNhdVJBRmw4dWVHREgKRVdXLythSEpkek5xTVY0azZxaXRVZERFVmhEQkdPQ3ZWTnlWYUlpVlhta0VoaWdNMGUxWTgxenhQd3FCc3FidQpCK1VvOHgySUwvaXFmMnkzQWxnQ2duWG5mTXFHaG5VaTJqekt4dEVVQUdWS0I1amR5YnBvcGtqZ0dTYzJORFZhCmxIVFc1dUZmTEo2SzRnREdKemVDZjhFQ2dZRUFvbkJ0UU5ZYkl5aEEvUFI1RFZrTjduM2RZSkxxV0JvSW40ZkIKNEdTUG1oOUkzc01tTVlzdk4wd3ZDVTVUcGhiM09lQkYxTmxDdnl6cUNYWC9TMGZoSjV5QXQzM2VuTVp3dFNieApFcmNGSmlCUmVRQklRRDB3R3NITzIzMDFFcGJzdnRSVkVBTmFVNSsweHFZeEZRU1gzYTVURG9wTnhkSDZ3elhZCi9TcVRrMTBDZ1lFQXpiMFRDT3NmMEZHVXVKWUNCbGtxbnNoQlRQSmV6blN5eUcvWGlHUlpTcWY4cTNtdWlMSEsKcW55Q3lacGFONWFCVzZPL21TbW55TXZhRGJqYmpzLzF4VExLLzFZa2hUbE1PNUtUR3VuS2xWSUNYbGEybnByKwpZOWJEczVFaXZXNjh2WTY0WmxuZkNQOVYzNjZXUVNEb3JEWG80d2FVTjJReDE1SHBad0o3aE1nPQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
          - name: conf
            value: dWkgICAgICAgICAgICA9IHRydWUKY2x1c3Rlcl9hZGRyICA9ICJodHRwOi8vMTI3LjAuMC4xOjgyMDEvIgphcGlfYWRkciAgICAgID0gImh0dHA6Ly8wLjAuMC4wOjgyMDAvIgpkaXNhYmxlX21sb2NrID0gdHJ1ZQpsaWNlbnNlX3BhdGggID0gIi92YXVsdC9saWNlbnNlLmhjbGljIgoKc3RvcmFnZSAicmFmdCIgewogICAgcGF0aCA9ICIvdmF1bHQvZGF0YSIKICAgIHZhdWx0X25vZGVfbmFtZSA9ICJ2YXVsdF8xIiAgICAgICAgICAgICNzZXR0aW5nIHVwIGEgdW5pcXVlIG5vZGVfaWQgZm9yIGVhY2ggdmF1bHQgbm9kZQp9CgpsaXN0ZW5lciAidGNwIiB7CiAgYWRkcmVzcyAgICAgICA9ICIwLjAuMC4wOjgyMDAiCiAgdGxzX2Rpc2FibGUgICA9IDEKfQoKc2VhbCAicGtjczExIiB7CiBrZXlfbGFiZWwgPSAidmF1bHQtaHNtLWtleSIKIGxpYiA9ICIvdXNyL2xvY2FsL2xpYi9wa2NzMTEtZ3JlcDExLXMzOTB4LnNvLjIuNi44Igogc2xvdCA9ICIwIgogbWVjaGFuaXNtID0gMHgxMDg1CiBwaW4gPSAiMTIzNDU2NzgiCiBnZW5lcmF0ZV9rZXkgPSAidHJ1ZSIKICMgdG9rZW5fbGFiZWwgPSAidmF1bHRwb2MiCiBobWFjX2tleV9sYWJlbCA9ICJ2YXVsdC1oc20taG1hYy1rZXkiCn0K
          - name: license
            value: **omitted**
          ports:
          - containerPort: 8200
            hostPort: 8200
        volumes:
        - name: vault-data
          hostPath:
            path: /mnt/data
            type: DirectoryOrCreate   
        restartPolicy: Never
volumes:
  test:
    mount: "/mnt/data"
    seed: "testing"
auths:
  us.icr.io:
    password: **omitted**
    username: iamapikey
